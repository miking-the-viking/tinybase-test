var e,s;e=this,s=function(e,s){"use strict";const t=e=>typeof e,o="",l=t(o),r="Tables",u="TableIds",d="Table",n="RowIds",i="SortedRowIds",a="Row",c="CellIds",I="Cell",w="Values",p="ValueIds",b="Value",R=(e,s)=>e.map(s),C=e=>null==e,k=(e,s,t)=>C(e)?null==t?void 0:t():s(e),v=e=>t(e)==l,g=()=>{},{createContext:m,useContext:y}=s,h=m([]),f=(e,s)=>{const t=y(h);return C(e)?t[s]:v(e)?((e,s)=>k(e,(e=>e[s])))(t[s+1],e):e},V=(e,s)=>{const t=f(e,s);return C(e)||v(e)?t:e},L=e=>V(e,0),S=e=>V(e,2),T=e=>V(e,4),P=e=>V(e,6),x=e=>V(e,8),q=e=>V(e,10),{useCallback:O,useEffect:B,useMemo:M,useRef:j,useState:D}=s,A=(e,s,t=[])=>{const o=M((()=>s(e)),[e,...t]);return B((()=>()=>o.destroy()),[o]),o},E=(e,s,t,o=[],l)=>{const[,r]=D(),u=O((()=>{var l,r;return null!=(r=null==(l=null==s?void 0:s["get"+e])?void 0:l.call(s,...o))?r:t}),[s,...o]),[d]=D(u),n=j(d);return M((()=>n.current=u()),[u]),F(e,s,((...e)=>{n.current=C(l)?u():e[l],r([])}),[],o),n.current},F=(e,s,t,o=[],l=[],...r)=>B((()=>{var o;const u=null==(o=null==s?void 0:s["add"+e+"Listener"])?void 0:o.call(s,...l,t,...r);return()=>null==s?void 0:s.delListener(u)}),[s,...l,...o,...r]),G=(e,s,t,o=[],l=g,r=[],...u)=>{const d=L(e);return O((e=>k(d,(o=>k(t(e,o),(e=>l(o["set"+s](...u,e),e)))))),[d,s,...o,...r,...u])},Q=(e,s,t=g,o=[],...l)=>{const r=L(e);return O((()=>t(null==r?void 0:r["del"+s](...l))),[r,s,...o,...l])},U=(e,s,t)=>{const o=q(e);return O((()=>null==o?void 0:o[s](t)),[o,s,t])},z=e=>E(u,L(e),[],[]),H=(e,s)=>E(n,L(s),[],[e]),J=(e,s,t,o=0,l,r)=>E(i,L(r),[],[e,s,t,o,l],6),K=(e,s,t)=>E(c,L(t),[],[e,s]),N=(e,s,t,o)=>E(I,L(o),void 0,[e,s,t],4),W=e=>E(p,L(e),[],[]),X=(e,s)=>E(b,L(s),void 0,[e]),Y=(e,s)=>E("Metric",S(s),void 0,[e]),Z=(e,s)=>E("SliceIds",T(s),[],[e]),$=(e,s,t)=>E("SliceRowIds",T(t),[],[e,s]),_=(e,s,t)=>E("RemoteRowId",P(t),void 0,[e,s]),ee=(e,s,t)=>E("LocalRowIds",P(t),[],[e,s]),se=(e,s,t)=>E("LinkedRowIds",P(t),[],[e,s]),te=(e,s)=>E("ResultRowIds",x(s),[],[e]),oe=(e,s,t,o=0,l,r)=>E("ResultSortedRowIds",x(r),[],[e,s,t,o,l],6),le=(e,s,t)=>E("ResultCellIds",x(t),[],[e,s]),re=(e,s,t,o)=>E("ResultCell",x(o),void 0,[e,s,t]),ue=e=>E("CheckpointIds",q(e),[[],void 0,[]]),de=(e,s)=>E("Checkpoint",q(s),void 0,[e]),ne=e=>U(e,"goBackward"),ie=e=>U(e,"goForward");var ae=Object.defineProperty,ce=Object.defineProperties,Ie=Object.getOwnPropertyDescriptors,we=Object.getOwnPropertySymbols,pe=Object.prototype.hasOwnProperty,be=Object.prototype.propertyIsEnumerable,Re=(e,s,t)=>s in e?ae(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t,Ce=(e,s)=>{for(var t in s||(s={}))pe.call(s,t)&&Re(e,t,s[t]);if(we)for(var t of we(s))be.call(s,t)&&Re(e,t,s[t]);return e},ke=(e,s)=>ce(e,Ie(s)),ve=(e,s)=>{var t={};for(var o in e)pe.call(e,o)&&s.indexOf(o)<0&&(t[o]=e[o]);if(null!=e&&we)for(var o of we(e))s.indexOf(o)<0&&be.call(e,o)&&(t[o]=e[o]);return t};const{createElement:ge,useMemo:me}=s,ye=({tableId:e,store:s,rowComponent:t=xe,getRowComponentProps:o,separator:l,debugIds:r},u)=>Te(R(u,(l=>ge(t,ke(Ce({},Se(o,l)),{key:l,tableId:e,rowId:l,store:s,debugIds:r})))),l,r,e),he=({queryId:e,queries:s,resultRowComponent:t=je,getResultRowComponentProps:o,separator:l,debugIds:r},u)=>Te(R(u,(l=>ge(t,ke(Ce({},Se(o,l)),{key:l,queryId:e,rowId:l,queries:s,debugIds:r})))),l,r,e),fe=e=>{const s=P(e);return[s,null==s?void 0:s.getStore()]},Ve=({relationshipId:e,relationships:s,rowComponent:t=xe,getRowComponentProps:o,separator:l,debugIds:r},u,d)=>{const[n,i]=fe(s),a=null==n?void 0:n.getLocalTableId(e),c=u(e,d,n);return Te(R(c,(e=>ge(t,ke(Ce({},Se(o,e)),{key:e,tableId:a,rowId:e,store:i,debugIds:r})))),l,r,d)},Le=e=>({checkpoints:s,checkpointComponent:t=De,getCheckpointComponentProps:o,separator:l,debugIds:r})=>{const u=q(s);return Te(R(e(ue(u)),(e=>ge(t,ke(Ce({},Se(o,e)),{key:e,checkpoints:u,checkpointId:e,debugIds:r})))),l)},Se=(e,s)=>C(e)?{}:e(s),Te=(e,s,t,o)=>{const l=C(s)||!Array.isArray(e)?e:R(e,((e,t)=>t>0?[s,e]:e));return t?[o,":{",l,"}"]:l},Pe=({tableId:e,rowId:s,cellId:t,store:l,debugIds:r})=>{var u;return Te(o+(null!=(u=N(e,s,t,l))?u:o),void 0,r,t)},xe=({tableId:e,rowId:s,store:t,cellComponent:o=Pe,getCellComponentProps:l,separator:r,debugIds:u})=>Te(R(K(e,s,t),(r=>ge(o,ke(Ce({},Se(l,r)),{key:r,tableId:e,rowId:s,cellId:r,store:t,debugIds:u})))),r,u,s),qe=e=>ye(e,H(e.tableId,e.store)),Oe=({valueId:e,store:s,debugIds:t})=>{var l;return Te(o+(null!=(l=X(e,s))?l:o),void 0,t,e)},Be=({indexId:e,sliceId:s,indexes:t,rowComponent:o=xe,getRowComponentProps:l,separator:r,debugIds:u})=>{const d=T(t),n=null==d?void 0:d.getStore(),i=null==d?void 0:d.getTableId(e),a=$(e,s,d);return Te(R(a,(e=>ge(o,ke(Ce({},Se(l,e)),{key:e,tableId:i,rowId:e,store:n,debugIds:u})))),r,u,s)},Me=({queryId:e,rowId:s,cellId:t,queries:l,debugIds:r})=>{var u;return Te(o+(null!=(u=re(e,s,t,l))?u:o),void 0,r,t)},je=({queryId:e,rowId:s,queries:t,resultCellComponent:o=Me,getResultCellComponentProps:l,separator:r,debugIds:u})=>Te(R(le(e,s,t),(r=>ge(o,ke(Ce({},Se(l,r)),{key:r,queryId:e,rowId:s,cellId:r,queries:t,debugIds:u})))),r,u,s),De=({checkpoints:e,checkpointId:s,debugIds:t})=>{var l;return Te(null!=(l=de(s,e))?l:o,void 0,t,s)},Ae=Le((e=>e[0])),Ee=Le((e=>C(e[1])?[]:[e[1]])),Fe=Le((e=>e[2]));e.BackwardCheckpointsView=Ae,e.CellView=Pe,e.CheckpointView=De,e.CurrentCheckpointView=Ee,e.ForwardCheckpointsView=Fe,e.IndexView=({indexId:e,indexes:s,sliceComponent:t=Be,getSliceComponentProps:o,separator:l,debugIds:r})=>Te(R(Z(e,s),(l=>ge(t,ke(Ce({},Se(o,l)),{key:l,indexId:e,sliceId:l,indexes:s,debugIds:r})))),l,r,e),e.LinkedRowsView=e=>Ve(e,se,e.firstRowId),e.LocalRowsView=e=>Ve(e,ee,e.remoteRowId),e.MetricView=({metricId:e,metrics:s,debugIds:t})=>{var l;return Te(null!=(l=Y(e,s))?l:o,void 0,t,e)},e.Provider=({store:e,storesById:t,metrics:o,metricsById:l,indexes:r,indexesById:u,relationships:d,relationshipsById:n,queries:i,queriesById:a,checkpoints:c,checkpointsById:I,children:w})=>{const p=s.useContext(h);return ge(h.Provider,{value:me((()=>[null!=e?e:p[0],Ce(Ce({},p[1]),t),null!=o?o:p[2],Ce(Ce({},p[3]),l),null!=r?r:p[4],Ce(Ce({},p[5]),u),null!=d?d:p[6],Ce(Ce({},p[7]),n),null!=i?i:p[8],Ce(Ce({},p[9]),a),null!=c?c:p[10],Ce(Ce({},p[11]),I)]),[e,t,o,l,r,u,d,n,i,a,c,I,p])},w)},e.RemoteRowView=({relationshipId:e,localRowId:s,relationships:t,rowComponent:o=xe,getRowComponentProps:l,debugIds:r})=>{const[u,d]=fe(t),n=null==u?void 0:u.getRemoteTableId(e),i=_(e,s,u);return Te(C(n)||C(i)?null:ge(o,ke(Ce({},Se(l,i)),{key:i,tableId:n,rowId:i,store:d,debugIds:r})),void 0,r,s)},e.ResultCellView=Me,e.ResultRowView=je,e.ResultSortedTableView=e=>{var s=e,{cellId:t,descending:o,offset:l,limit:r}=s,u=ve(s,["cellId","descending","offset","limit"]);return he(u,oe(u.queryId,t,o,l,r,u.queries))},e.ResultTableView=e=>he(e,te(e.queryId,e.queries)),e.RowView=xe,e.SliceView=Be,e.SortedTableView=e=>{var s=e,{cellId:t,descending:o,offset:l,limit:r}=s,u=ve(s,["cellId","descending","offset","limit"]);return ye(u,J(u.tableId,t,o,l,r,u.store))},e.TableView=qe,e.TablesView=({store:e,tableComponent:s=qe,getTableComponentProps:t,separator:o,debugIds:l})=>Te(R(z(e),(o=>ge(s,ke(Ce({},Se(t,o)),{key:o,tableId:o,store:e,debugIds:l})))),o),e.ValueView=Oe,e.ValuesView=({store:e,valueComponent:s=Oe,getValueComponentProps:t,separator:o,debugIds:l})=>Te(R(W(e),(o=>ge(s,ke(Ce({},Se(t,o)),{key:o,valueId:o,store:e,debugIds:l})))),o),e.tableView=ye,e.useAddRowCallback=(e,s,t=[],o,l=g,r=[])=>{const u=L(o);return O((t=>k(u,(o=>k(s(t,o),(s=>l(o.addRow(e,s),o,s)))))),[u,e,...t,...r])},e.useCell=N,e.useCellIds=K,e.useCellIdsListener=(e,s,t,o,l,r)=>F(c,L(r),t,o,[e,s],l),e.useCellListener=(e,s,t,o,l,r,u)=>F(I,L(u),o,l,[e,s,t],r),e.useCheckpoint=de,e.useCheckpointIds=ue,e.useCheckpointIdsListener=(e,s,t)=>F("CheckpointIds",q(t),e,s),e.useCheckpointListener=(e,s,t,o)=>F("Checkpoint",q(o),s,t,[e]),e.useCheckpoints=e=>f(e,10),e.useCreateCheckpoints=(e,s,t)=>A(e,s,t),e.useCreateIndexes=(e,s,t)=>A(e,s,t),e.useCreateMetrics=(e,s,t)=>A(e,s,t),e.useCreatePersister=(e,s,t=[],o,l=[])=>{const[,r]=D(),u=M((()=>s(e)),[e,...t]);return B((()=>{var e;return e=function*(){yield null==o?void 0:o(u),r(1)},new Promise(((s,t)=>{var o=s=>{try{r(e.next(s))}catch(e){t(e)}},l=s=>{try{r(e.throw(s))}catch(e){t(e)}},r=e=>e.done?s(e.value):Promise.resolve(e.value).then(o,l);r((e=e.apply(void 0,null)).next())})),()=>{u.destroy()}}),[u,...l]),u},e.useCreateQueries=(e,s,t)=>A(e,s,t),e.useCreateRelationships=(e,s,t)=>A(e,s,t),e.useCreateStore=(e,s=[])=>M(e,s),e.useDelCellCallback=(e,s,t,o,l,r,u)=>Q(l,I,r,u,e,s,t,o),e.useDelRowCallback=(e,s,t,o,l)=>Q(t,a,o,l,e,s),e.useDelTableCallback=(e,s,t,o)=>Q(s,d,t,o,e),e.useDelTablesCallback=(e,s,t)=>Q(e,r,s,t),e.useDelValueCallback=(e,s,t,o)=>Q(s,b,t,o,e),e.useDelValuesCallback=(e,s,t)=>Q(e,w,s,t),e.useGoBackwardCallback=ne,e.useGoForwardCallback=ie,e.useGoToCallback=(e,s=[],t,o=g,l=[])=>{const r=q(t);return O((s=>k(r,(t=>k(e(s),(e=>o(t.goTo(e),e)))))),[r,...s,...l])},e.useIndexes=e=>f(e,4),e.useLinkedRowIds=se,e.useLinkedRowIdsListener=(e,s,t,o,l)=>F("LinkedRowIds",P(l),t,o,[e,s]),e.useLocalRowIds=ee,e.useLocalRowIdsListener=(e,s,t,o,l)=>F("LocalRowIds",P(l),t,o,[e,s]),e.useMetric=Y,e.useMetricListener=(e,s,t,o)=>F("Metric",S(o),s,t,[e]),e.useMetrics=e=>f(e,2),e.useQueries=e=>f(e,8),e.useRedoInformation=e=>{var s;const t=q(e),[,,[l]]=ue(t);return[!C(l),ie(t),l,null!=(s=k(l,(e=>null==t?void 0:t.getCheckpoint(e))))?s:o]},e.useRelationships=e=>f(e,6),e.useRemoteRowId=_,e.useRemoteRowIdListener=(e,s,t,o,l)=>F("RemoteRowId",P(l),t,o,[e,s]),e.useResultCell=re,e.useResultCellIds=le,e.useResultCellIdsListener=(e,s,t,o,l)=>F("ResultCellIds",x(l),t,o,[e,s]),e.useResultCellListener=(e,s,t,o,l,r)=>F("ResultCell",x(r),o,l,[e,s,t]),e.useResultRow=(e,s,t)=>E("ResultRow",x(t),{},[e,s]),e.useResultRowIds=te,e.useResultRowIdsListener=(e,s,t,o)=>F("ResultRowIds",x(o),s,t,[e]),e.useResultRowListener=(e,s,t,o,l)=>F("ResultRow",x(l),t,o,[e,s]),e.useResultSortedRowIds=oe,e.useResultSortedRowIdsListener=(e,s,t,o,l,r,u,d)=>F("ResultSortedRowIds",x(d),r,u,[e,s,t,o,l]),e.useResultTable=(e,s)=>E("ResultTable",x(s),{},[e]),e.useResultTableListener=(e,s,t,o)=>F("ResultTable",x(o),s,t,[e]),e.useRow=(e,s,t)=>E(a,L(t),{},[e,s]),e.useRowIds=H,e.useRowIdsListener=(e,s,t,o,l)=>F(n,L(l),s,t,[e],o),e.useRowListener=(e,s,t,o,l,r)=>F(a,L(r),t,o,[e,s],l),e.useSetCellCallback=(e,s,t,o,l,r,u,d)=>G(r,I,o,l,u,d,e,s,t),e.useSetCheckpointCallback=(e=g,s=[],t,o=g,l=[])=>{const r=q(t);return O((s=>k(r,(t=>{const l=e(s);o(t.addCheckpoint(l),t,l)}))),[r,...s,...l])},e.useSetPartialRowCallback=(e,s,t,o,l,r,u)=>G(l,"PartialRow",t,o,r,u,e,s),e.useSetPartialValuesCallback=(e,s,t,o,l)=>G(t,"PartialValues",e,s,o,l),e.useSetRowCallback=(e,s,t,o,l,r,u)=>G(l,a,t,o,r,u,e,s),e.useSetTableCallback=(e,s,t,o,l,r)=>G(o,d,s,t,l,r,e),e.useSetTablesCallback=(e,s,t,o,l)=>G(t,r,e,s,o,l),e.useSetValueCallback=(e,s,t,o,l,r)=>G(o,b,s,t,l,r,e),e.useSetValuesCallback=(e,s,t,o,l)=>G(t,w,e,s,o,l),e.useSliceIds=Z,e.useSliceIdsListener=(e,s,t,o)=>F("SliceIds",T(o),s,t,[e]),e.useSliceRowIds=$,e.useSliceRowIdsListener=(e,s,t,o,l)=>F("SliceRowIds",T(l),t,o,[e,s]),e.useSortedRowIds=J,e.useSortedRowIdsListener=(e,s,t,o,l,r,u,d,n)=>F(i,L(n),r,u,[e,s,t,o,l],d),e.useStore=e=>f(e,0),e.useTable=(e,s)=>E(d,L(s),{},[e]),e.useTableIds=z,e.useTableIdsListener=(e,s,t,o)=>F(u,L(o),e,s,[],t),e.useTableListener=(e,s,t,o,l)=>F(d,L(l),s,t,[e],o),e.useTables=e=>E(r,L(e),{}),e.useTablesListener=(e,s,t,o)=>F(r,L(o),e,s,[],t),e.useUndoInformation=e=>{var s;const t=q(e),[l,r]=ue(t);return[(u=l,!(0==(e=>e.length)(u))),ne(t),r,null!=(s=k(r,(e=>null==t?void 0:t.getCheckpoint(e))))?s:o];var u},e.useValue=X,e.useValueIds=W,e.useValueIdsListener=(e,s,t,o)=>F(p,L(o),e,s,[],t),e.useValueListener=(e,s,t,o,l)=>F(b,L(l),s,t,[e],o),e.useValues=e=>E(w,L(e),{}),e.useValuesListener=(e,s,t,o)=>F(w,L(o),e,s,[],t)},"object"==typeof exports&&"undefined"!=typeof module?s(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],s):s((e="undefined"!=typeof globalThis?globalThis:e||self).TinyBaseUiReact={},e.React);
