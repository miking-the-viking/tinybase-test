"use strict";var e=require("react");const s=e=>typeof e,t=s(""),o=(e,s)=>e.map(s),r=e=>null==e,l=(e,s,t)=>r(e)?t?.():s(e),d=e=>s(e)==t,u=()=>{},{createContext:a,useContext:n}=e,p=a([]),i=(e,s)=>{const t=n(p);return r(e)?t[s]:d(e)?((e,s)=>l(e,(e=>e[s])))(t[s+1],e):e},I=(e,s)=>{const t=i(e,s);return r(e)||d(e)?t:e},c=e=>I(e,0),x=e=>I(e,2),w=e=>I(e,4),R=e=>I(e,6),C=e=>I(e,8),b=e=>I(e,10),{useCallback:k,useEffect:g,useMemo:V,useRef:m,useState:L}=e,h=(e,s,t=[])=>{const o=V((()=>s(e)),[e,...t]);return g((()=>()=>o.destroy()),[o]),o},T=(e,s,t,o=[],l)=>{const[,d]=L(),u=k((()=>s?.["get"+e]?.(...o)??t),[s,...o]),[a]=L(u),n=m(a);return V((()=>n.current=u()),[u]),S(e,s,((...e)=>{n.current=r(l)?u():e[l],d([])}),[],o),n.current},S=(e,s,t,o=[],r=[],...l)=>g((()=>{const o=s?.["add"+e+"Listener"]?.(...r,t,...l);return()=>s?.delListener(o)}),[s,...r,...o,...l]),y=(e,s,t,o=[],r=u,d=[],...a)=>{const n=c(e);return k((e=>l(n,(o=>l(t(e,o),(e=>r(o["set"+s](...a,e),e)))))),[n,s,...o,...d,...a])},v=(e,s,t=u,o=[],...r)=>{const l=c(e);return k((()=>t(l?.["del"+s](...r))),[l,s,...o,...r])},P=(e,s,t)=>{const o=b(e);return k((()=>o?.[s](t)),[o,s,t])},q=e=>T("TableIds",c(e),[],[]),f=(e,s)=>T("RowIds",c(s),[],[e]),B=(e,s,t,o=0,r,l)=>T("SortedRowIds",c(l),[],[e,s,t,o,r],6),M=(e,s,t)=>T("CellIds",c(t),[],[e,s]),D=(e,s,t,o)=>T("Cell",c(o),void 0,[e,s,t],4),A=e=>T("ValueIds",c(e),[],[]),F=(e,s)=>T("Value",c(s),void 0,[e]),G=(e,s)=>T("Metric",x(s),void 0,[e]),E=(e,s)=>T("SliceIds",w(s),[],[e]),Q=(e,s,t)=>T("SliceRowIds",w(t),[],[e,s]),U=(e,s,t)=>T("RemoteRowId",R(t),void 0,[e,s]),j=(e,s,t)=>T("LocalRowIds",R(t),[],[e,s]),z=(e,s,t)=>T("LinkedRowIds",R(t),[],[e,s]),H=(e,s)=>T("ResultRowIds",C(s),[],[e]),J=(e,s,t,o=0,r,l)=>T("ResultSortedRowIds",C(l),[],[e,s,t,o,r],6),K=(e,s,t)=>T("ResultCellIds",C(t),[],[e,s]),N=(e,s,t,o)=>T("ResultCell",C(o),void 0,[e,s,t]),O=e=>T("CheckpointIds",b(e),[[],void 0,[]]),W=(e,s)=>T("Checkpoint",b(s),void 0,[e]),X=e=>P(e,"goBackward"),Y=e=>P(e,"goForward"),{createElement:Z,useMemo:$}=e,_=({tableId:e,store:s,rowComponent:t=ue,getRowComponentProps:r,separator:l,debugIds:d},u)=>le(o(u,(o=>Z(t,{...re(r,o),key:o,tableId:e,rowId:o,store:s,debugIds:d}))),l,d,e),ee=({queryId:e,queries:s,resultRowComponent:t=Ie,getResultRowComponentProps:r,separator:l,debugIds:d},u)=>le(o(u,(o=>Z(t,{...re(r,o),key:o,queryId:e,rowId:o,queries:s,debugIds:d}))),l,d,e),se=e=>{const s=R(e);return[s,s?.getStore()]},te=({relationshipId:e,relationships:s,rowComponent:t=ue,getRowComponentProps:r,separator:l,debugIds:d},u,a)=>{const[n,p]=se(s),i=n?.getLocalTableId(e),I=u(e,a,n);return le(o(I,(e=>Z(t,{...re(r,e),key:e,tableId:i,rowId:e,store:p,debugIds:d}))),l,d,a)},oe=e=>({checkpoints:s,checkpointComponent:t=ce,getCheckpointComponentProps:r,separator:l,debugIds:d})=>{const u=b(s);return le(o(e(O(u)),(e=>Z(t,{...re(r,e),key:e,checkpoints:u,checkpointId:e,debugIds:d}))),l)},re=(e,s)=>r(e)?{}:e(s),le=(e,s,t,l)=>{const d=r(s)||!Array.isArray(e)?e:o(e,((e,t)=>t>0?[s,e]:e));return t?[l,":{",d,"}"]:d},de=({tableId:e,rowId:s,cellId:t,store:o,debugIds:r})=>le(""+(D(e,s,t,o)??""),void 0,r,t),ue=({tableId:e,rowId:s,store:t,cellComponent:r=de,getCellComponentProps:l,separator:d,debugIds:u})=>le(o(M(e,s,t),(o=>Z(r,{...re(l,o),key:o,tableId:e,rowId:s,cellId:o,store:t,debugIds:u}))),d,u,s),ae=e=>_(e,f(e.tableId,e.store)),ne=({valueId:e,store:s,debugIds:t})=>le(""+(F(e,s)??""),void 0,t,e),pe=({indexId:e,sliceId:s,indexes:t,rowComponent:r=ue,getRowComponentProps:l,separator:d,debugIds:u})=>{const a=w(t),n=a?.getStore(),p=a?.getTableId(e),i=Q(e,s,a);return le(o(i,(e=>Z(r,{...re(l,e),key:e,tableId:p,rowId:e,store:n,debugIds:u}))),d,u,s)},ie=({queryId:e,rowId:s,cellId:t,queries:o,debugIds:r})=>le(""+(N(e,s,t,o)??""),void 0,r,t),Ie=({queryId:e,rowId:s,queries:t,resultCellComponent:r=ie,getResultCellComponentProps:l,separator:d,debugIds:u})=>le(o(K(e,s,t),(o=>Z(r,{...re(l,o),key:o,queryId:e,rowId:s,cellId:o,queries:t,debugIds:u}))),d,u,s),ce=({checkpoints:e,checkpointId:s,debugIds:t})=>le(W(s,e)??"",void 0,t,s),xe=oe((e=>e[0])),we=oe((e=>r(e[1])?[]:[e[1]])),Re=oe((e=>e[2]));exports.BackwardCheckpointsView=xe,exports.CellView=de,exports.CheckpointView=ce,exports.CurrentCheckpointView=we,exports.ForwardCheckpointsView=Re,exports.IndexView=({indexId:e,indexes:s,sliceComponent:t=pe,getSliceComponentProps:r,separator:l,debugIds:d})=>le(o(E(e,s),(o=>Z(t,{...re(r,o),key:o,indexId:e,sliceId:o,indexes:s,debugIds:d}))),l,d,e),exports.LinkedRowsView=e=>te(e,z,e.firstRowId),exports.LocalRowsView=e=>te(e,j,e.remoteRowId),exports.MetricView=({metricId:e,metrics:s,debugIds:t})=>le(G(e,s)??"",void 0,t,e),exports.Provider=({store:s,storesById:t,metrics:o,metricsById:r,indexes:l,indexesById:d,relationships:u,relationshipsById:a,queries:n,queriesById:i,checkpoints:I,checkpointsById:c,children:x})=>{const w=e.useContext(p);return Z(p.Provider,{value:$((()=>[s??w[0],{...w[1],...t},o??w[2],{...w[3],...r},l??w[4],{...w[5],...d},u??w[6],{...w[7],...a},n??w[8],{...w[9],...i},I??w[10],{...w[11],...c}]),[s,t,o,r,l,d,u,a,n,i,I,c,w])},x)},exports.RemoteRowView=({relationshipId:e,localRowId:s,relationships:t,rowComponent:o=ue,getRowComponentProps:l,debugIds:d})=>{const[u,a]=se(t),n=u?.getRemoteTableId(e),p=U(e,s,u);return le(r(n)||r(p)?null:Z(o,{...re(l,p),key:p,tableId:n,rowId:p,store:a,debugIds:d}),void 0,d,s)},exports.ResultCellView=ie,exports.ResultRowView=Ie,exports.ResultSortedTableView=({cellId:e,descending:s,offset:t,limit:o,...r})=>ee(r,J(r.queryId,e,s,t,o,r.queries)),exports.ResultTableView=e=>ee(e,H(e.queryId,e.queries)),exports.RowView=ue,exports.SliceView=pe,exports.SortedTableView=({cellId:e,descending:s,offset:t,limit:o,...r})=>_(r,B(r.tableId,e,s,t,o,r.store)),exports.TableView=ae,exports.TablesView=({store:e,tableComponent:s=ae,getTableComponentProps:t,separator:r,debugIds:l})=>le(o(q(e),(o=>Z(s,{...re(t,o),key:o,tableId:o,store:e,debugIds:l}))),r),exports.ValueView=ne,exports.ValuesView=({store:e,valueComponent:s=ne,getValueComponentProps:t,separator:r,debugIds:l})=>le(o(A(e),(o=>Z(s,{...re(t,o),key:o,valueId:o,store:e,debugIds:l}))),r),exports.tableView=_,exports.useAddRowCallback=(e,s,t=[],o,r=u,d=[])=>{const a=c(o);return k((t=>l(a,(o=>l(s(t,o),(s=>r(o.addRow(e,s),o,s)))))),[a,e,...t,...d])},exports.useCell=D,exports.useCellIds=M,exports.useCellIdsListener=(e,s,t,o,r,l)=>S("CellIds",c(l),t,o,[e,s],r),exports.useCellListener=(e,s,t,o,r,l,d)=>S("Cell",c(d),o,r,[e,s,t],l),exports.useCheckpoint=W,exports.useCheckpointIds=O,exports.useCheckpointIdsListener=(e,s,t)=>S("CheckpointIds",b(t),e,s),exports.useCheckpointListener=(e,s,t,o)=>S("Checkpoint",b(o),s,t,[e]),exports.useCheckpoints=e=>i(e,10),exports.useCreateCheckpoints=(e,s,t)=>h(e,s,t),exports.useCreateIndexes=(e,s,t)=>h(e,s,t),exports.useCreateMetrics=(e,s,t)=>h(e,s,t),exports.useCreatePersister=(e,s,t=[],o,r=[])=>{const[,l]=L(),d=V((()=>s(e)),[e,...t]);return g((()=>((async()=>{await(o?.(d)),l(1)})(),()=>{d.destroy()})),[d,...r]),d},exports.useCreateQueries=(e,s,t)=>h(e,s,t),exports.useCreateRelationships=(e,s,t)=>h(e,s,t),exports.useCreateStore=(e,s=[])=>V(e,s),exports.useDelCellCallback=(e,s,t,o,r,l,d)=>v(r,"Cell",l,d,e,s,t,o),exports.useDelRowCallback=(e,s,t,o,r)=>v(t,"Row",o,r,e,s),exports.useDelTableCallback=(e,s,t,o)=>v(s,"Table",t,o,e),exports.useDelTablesCallback=(e,s,t)=>v(e,"Tables",s,t),exports.useDelValueCallback=(e,s,t,o)=>v(s,"Value",t,o,e),exports.useDelValuesCallback=(e,s,t)=>v(e,"Values",s,t),exports.useGoBackwardCallback=X,exports.useGoForwardCallback=Y,exports.useGoToCallback=(e,s=[],t,o=u,r=[])=>{const d=b(t);return k((s=>l(d,(t=>l(e(s),(e=>o(t.goTo(e),e)))))),[d,...s,...r])},exports.useIndexes=e=>i(e,4),exports.useLinkedRowIds=z,exports.useLinkedRowIdsListener=(e,s,t,o,r)=>S("LinkedRowIds",R(r),t,o,[e,s]),exports.useLocalRowIds=j,exports.useLocalRowIdsListener=(e,s,t,o,r)=>S("LocalRowIds",R(r),t,o,[e,s]),exports.useMetric=G,exports.useMetricListener=(e,s,t,o)=>S("Metric",x(o),s,t,[e]),exports.useMetrics=e=>i(e,2),exports.useQueries=e=>i(e,8),exports.useRedoInformation=e=>{const s=b(e),[,,[t]]=O(s);return[!r(t),Y(s),t,l(t,(e=>s?.getCheckpoint(e)))??""]},exports.useRelationships=e=>i(e,6),exports.useRemoteRowId=U,exports.useRemoteRowIdListener=(e,s,t,o,r)=>S("RemoteRowId",R(r),t,o,[e,s]),exports.useResultCell=N,exports.useResultCellIds=K,exports.useResultCellIdsListener=(e,s,t,o,r)=>S("ResultCellIds",C(r),t,o,[e,s]),exports.useResultCellListener=(e,s,t,o,r,l)=>S("ResultCell",C(l),o,r,[e,s,t]),exports.useResultRow=(e,s,t)=>T("ResultRow",C(t),{},[e,s]),exports.useResultRowIds=H,exports.useResultRowIdsListener=(e,s,t,o)=>S("ResultRowIds",C(o),s,t,[e]),exports.useResultRowListener=(e,s,t,o,r)=>S("ResultRow",C(r),t,o,[e,s]),exports.useResultSortedRowIds=J,exports.useResultSortedRowIdsListener=(e,s,t,o,r,l,d,u)=>S("ResultSortedRowIds",C(u),l,d,[e,s,t,o,r]),exports.useResultTable=(e,s)=>T("ResultTable",C(s),{},[e]),exports.useResultTableListener=(e,s,t,o)=>S("ResultTable",C(o),s,t,[e]),exports.useRow=(e,s,t)=>T("Row",c(t),{},[e,s]),exports.useRowIds=f,exports.useRowIdsListener=(e,s,t,o,r)=>S("RowIds",c(r),s,t,[e],o),exports.useRowListener=(e,s,t,o,r,l)=>S("Row",c(l),t,o,[e,s],r),exports.useSetCellCallback=(e,s,t,o,r,l,d,u)=>y(l,"Cell",o,r,d,u,e,s,t),exports.useSetCheckpointCallback=(e=u,s=[],t,o=u,r=[])=>{const d=b(t);return k((s=>l(d,(t=>{const r=e(s);o(t.addCheckpoint(r),t,r)}))),[d,...s,...r])},exports.useSetPartialRowCallback=(e,s,t,o,r,l,d)=>y(r,"PartialRow",t,o,l,d,e,s),exports.useSetPartialValuesCallback=(e,s,t,o,r)=>y(t,"PartialValues",e,s,o,r),exports.useSetRowCallback=(e,s,t,o,r,l,d)=>y(r,"Row",t,o,l,d,e,s),exports.useSetTableCallback=(e,s,t,o,r,l)=>y(o,"Table",s,t,r,l,e),exports.useSetTablesCallback=(e,s,t,o,r)=>y(t,"Tables",e,s,o,r),exports.useSetValueCallback=(e,s,t,o,r,l)=>y(o,"Value",s,t,r,l,e),exports.useSetValuesCallback=(e,s,t,o,r)=>y(t,"Values",e,s,o,r),exports.useSliceIds=E,exports.useSliceIdsListener=(e,s,t,o)=>S("SliceIds",w(o),s,t,[e]),exports.useSliceRowIds=Q,exports.useSliceRowIdsListener=(e,s,t,o,r)=>S("SliceRowIds",w(r),t,o,[e,s]),exports.useSortedRowIds=B,exports.useSortedRowIdsListener=(e,s,t,o,r,l,d,u,a)=>S("SortedRowIds",c(a),l,d,[e,s,t,o,r],u),exports.useStore=e=>i(e,0),exports.useTable=(e,s)=>T("Table",c(s),{},[e]),exports.useTableIds=q,exports.useTableIdsListener=(e,s,t,o)=>S("TableIds",c(o),e,s,[],t),exports.useTableListener=(e,s,t,o,r)=>S("Table",c(r),s,t,[e],o),exports.useTables=e=>T("Tables",c(e),{}),exports.useTablesListener=(e,s,t,o)=>S("Tables",c(o),e,s,[],t),exports.useUndoInformation=e=>{const s=b(e),[t,o]=O(s);return[(r=t,!(0==(e=>e.length)(r))),X(s),o,l(o,(e=>s?.getCheckpoint(e)))??""];var r},exports.useValue=F,exports.useValueIds=A,exports.useValueIdsListener=(e,s,t,o)=>S("ValueIds",c(o),e,s,[],t),exports.useValueListener=(e,s,t,o,r)=>S("Value",c(r),s,t,[e],o),exports.useValues=e=>T("Values",c(e),{}),exports.useValuesListener=(e,s,t,o)=>S("Values",c(o),e,s,[],t);
