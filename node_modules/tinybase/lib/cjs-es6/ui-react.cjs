"use strict";var e=require("react");const s=e=>typeof e,t=s(""),o=(e,s)=>e.map(s),r=e=>null==e,l=(e,s,t)=>r(e)?null==t?void 0:t():s(e),u=e=>s(e)==t,d=()=>{},{createContext:n,useContext:a}=e,i=n([]),p=(e,s)=>{const t=a(i);return r(e)?t[s]:u(e)?((e,s)=>l(e,(e=>e[s])))(t[s+1],e):e},c=(e,s)=>{const t=p(e,s);return r(e)||u(e)?t:e},I=e=>c(e,0),x=e=>c(e,2),w=e=>c(e,4),b=e=>c(e,6),R=e=>c(e,8),C=e=>c(e,10),{useCallback:k,useEffect:v,useMemo:g,useRef:m,useState:V}=e,h=(e,s,t=[])=>{const o=g((()=>s(e)),[e,...t]);return v((()=>()=>o.destroy()),[o]),o},y=(e,s,t,o=[],l)=>{const[,u]=V(),d=k((()=>{var r,l;return null!=(l=null==(r=null==s?void 0:s["get"+e])?void 0:r.call(s,...o))?l:t}),[s,...o]),[n]=V(d),a=m(n);return g((()=>a.current=d()),[d]),L(e,s,((...e)=>{a.current=r(l)?d():e[l],u([])}),[],o),a.current},L=(e,s,t,o=[],r=[],...l)=>v((()=>{var o;const u=null==(o=null==s?void 0:s["add"+e+"Listener"])?void 0:o.call(s,...r,t,...l);return()=>null==s?void 0:s.delListener(u)}),[s,...r,...o,...l]),S=(e,s,t,o=[],r=d,u=[],...n)=>{const a=I(e);return k((e=>l(a,(o=>l(t(e,o),(e=>r(o["set"+s](...n,e),e)))))),[a,s,...o,...u,...n])},T=(e,s,t=d,o=[],...r)=>{const l=I(e);return k((()=>t(null==l?void 0:l["del"+s](...r))),[l,s,...o,...r])},f=(e,s,t)=>{const o=C(e);return k((()=>null==o?void 0:o[s](t)),[o,s,t])},P=e=>y("TableIds",I(e),[],[]),q=(e,s)=>y("RowIds",I(s),[],[e]),O=(e,s,t,o=0,r,l)=>y("SortedRowIds",I(l),[],[e,s,t,o,r],6),B=(e,s,t)=>y("CellIds",I(t),[],[e,s]),M=(e,s,t,o)=>y("Cell",I(o),void 0,[e,s,t],4),D=e=>y("ValueIds",I(e),[],[]),j=(e,s)=>y("Value",I(s),void 0,[e]),A=(e,s)=>y("Metric",x(s),void 0,[e]),E=(e,s)=>y("SliceIds",w(s),[],[e]),F=(e,s,t)=>y("SliceRowIds",w(t),[],[e,s]),G=(e,s,t)=>y("RemoteRowId",b(t),void 0,[e,s]),Q=(e,s,t)=>y("LocalRowIds",b(t),[],[e,s]),U=(e,s,t)=>y("LinkedRowIds",b(t),[],[e,s]),z=(e,s)=>y("ResultRowIds",R(s),[],[e]),H=(e,s,t,o=0,r,l)=>y("ResultSortedRowIds",R(l),[],[e,s,t,o,r],6),J=(e,s,t)=>y("ResultCellIds",R(t),[],[e,s]),K=(e,s,t,o)=>y("ResultCell",R(o),void 0,[e,s,t]),N=e=>y("CheckpointIds",C(e),[[],void 0,[]]),W=(e,s)=>y("Checkpoint",C(s),void 0,[e]),X=e=>f(e,"goBackward"),Y=e=>f(e,"goForward");var Z=Object.defineProperty,$=Object.defineProperties,_=Object.getOwnPropertyDescriptors,ee=Object.getOwnPropertySymbols,se=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable,oe=(e,s,t)=>s in e?Z(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t,re=(e,s)=>{for(var t in s||(s={}))se.call(s,t)&&oe(e,t,s[t]);if(ee)for(var t of ee(s))te.call(s,t)&&oe(e,t,s[t]);return e},le=(e,s)=>$(e,_(s)),ue=(e,s)=>{var t={};for(var o in e)se.call(e,o)&&s.indexOf(o)<0&&(t[o]=e[o]);if(null!=e&&ee)for(var o of ee(e))s.indexOf(o)<0&&te.call(e,o)&&(t[o]=e[o]);return t};const{createElement:de,useMemo:ne}=e,ae=({tableId:e,store:s,rowComponent:t=Re,getRowComponentProps:r,separator:l,debugIds:u},d)=>we(o(d,(o=>de(t,le(re({},xe(r,o)),{key:o,tableId:e,rowId:o,store:s,debugIds:u})))),l,u,e),ie=({queryId:e,queries:s,resultRowComponent:t=me,getResultRowComponentProps:r,separator:l,debugIds:u},d)=>we(o(d,(o=>de(t,le(re({},xe(r,o)),{key:o,queryId:e,rowId:o,queries:s,debugIds:u})))),l,u,e),pe=e=>{const s=b(e);return[s,null==s?void 0:s.getStore()]},ce=({relationshipId:e,relationships:s,rowComponent:t=Re,getRowComponentProps:r,separator:l,debugIds:u},d,n)=>{const[a,i]=pe(s),p=null==a?void 0:a.getLocalTableId(e),c=d(e,n,a);return we(o(c,(e=>de(t,le(re({},xe(r,e)),{key:e,tableId:p,rowId:e,store:i,debugIds:u})))),l,u,n)},Ie=e=>({checkpoints:s,checkpointComponent:t=Ve,getCheckpointComponentProps:r,separator:l,debugIds:u})=>{const d=C(s);return we(o(e(N(d)),(e=>de(t,le(re({},xe(r,e)),{key:e,checkpoints:d,checkpointId:e,debugIds:u})))),l)},xe=(e,s)=>r(e)?{}:e(s),we=(e,s,t,l)=>{const u=r(s)||!Array.isArray(e)?e:o(e,((e,t)=>t>0?[s,e]:e));return t?[l,":{",u,"}"]:u},be=({tableId:e,rowId:s,cellId:t,store:o,debugIds:r})=>{var l;return we(""+(null!=(l=M(e,s,t,o))?l:""),void 0,r,t)},Re=({tableId:e,rowId:s,store:t,cellComponent:r=be,getCellComponentProps:l,separator:u,debugIds:d})=>we(o(B(e,s,t),(o=>de(r,le(re({},xe(l,o)),{key:o,tableId:e,rowId:s,cellId:o,store:t,debugIds:d})))),u,d,s),Ce=e=>ae(e,q(e.tableId,e.store)),ke=({valueId:e,store:s,debugIds:t})=>{var o;return we(""+(null!=(o=j(e,s))?o:""),void 0,t,e)},ve=({indexId:e,sliceId:s,indexes:t,rowComponent:r=Re,getRowComponentProps:l,separator:u,debugIds:d})=>{const n=w(t),a=null==n?void 0:n.getStore(),i=null==n?void 0:n.getTableId(e),p=F(e,s,n);return we(o(p,(e=>de(r,le(re({},xe(l,e)),{key:e,tableId:i,rowId:e,store:a,debugIds:d})))),u,d,s)},ge=({queryId:e,rowId:s,cellId:t,queries:o,debugIds:r})=>{var l;return we(""+(null!=(l=K(e,s,t,o))?l:""),void 0,r,t)},me=({queryId:e,rowId:s,queries:t,resultCellComponent:r=ge,getResultCellComponentProps:l,separator:u,debugIds:d})=>we(o(J(e,s,t),(o=>de(r,le(re({},xe(l,o)),{key:o,queryId:e,rowId:s,cellId:o,queries:t,debugIds:d})))),u,d,s),Ve=({checkpoints:e,checkpointId:s,debugIds:t})=>{var o;return we(null!=(o=W(s,e))?o:"",void 0,t,s)},he=Ie((e=>e[0])),ye=Ie((e=>r(e[1])?[]:[e[1]])),Le=Ie((e=>e[2]));exports.BackwardCheckpointsView=he,exports.CellView=be,exports.CheckpointView=Ve,exports.CurrentCheckpointView=ye,exports.ForwardCheckpointsView=Le,exports.IndexView=({indexId:e,indexes:s,sliceComponent:t=ve,getSliceComponentProps:r,separator:l,debugIds:u})=>we(o(E(e,s),(o=>de(t,le(re({},xe(r,o)),{key:o,indexId:e,sliceId:o,indexes:s,debugIds:u})))),l,u,e),exports.LinkedRowsView=e=>ce(e,U,e.firstRowId),exports.LocalRowsView=e=>ce(e,Q,e.remoteRowId),exports.MetricView=({metricId:e,metrics:s,debugIds:t})=>{var o;return we(null!=(o=A(e,s))?o:"",void 0,t,e)},exports.Provider=({store:s,storesById:t,metrics:o,metricsById:r,indexes:l,indexesById:u,relationships:d,relationshipsById:n,queries:a,queriesById:p,checkpoints:c,checkpointsById:I,children:x})=>{const w=e.useContext(i);return de(i.Provider,{value:ne((()=>[null!=s?s:w[0],re(re({},w[1]),t),null!=o?o:w[2],re(re({},w[3]),r),null!=l?l:w[4],re(re({},w[5]),u),null!=d?d:w[6],re(re({},w[7]),n),null!=a?a:w[8],re(re({},w[9]),p),null!=c?c:w[10],re(re({},w[11]),I)]),[s,t,o,r,l,u,d,n,a,p,c,I,w])},x)},exports.RemoteRowView=({relationshipId:e,localRowId:s,relationships:t,rowComponent:o=Re,getRowComponentProps:l,debugIds:u})=>{const[d,n]=pe(t),a=null==d?void 0:d.getRemoteTableId(e),i=G(e,s,d);return we(r(a)||r(i)?null:de(o,le(re({},xe(l,i)),{key:i,tableId:a,rowId:i,store:n,debugIds:u})),void 0,u,s)},exports.ResultCellView=ge,exports.ResultRowView=me,exports.ResultSortedTableView=e=>{var s=e,{cellId:t,descending:o,offset:r,limit:l}=s,u=ue(s,["cellId","descending","offset","limit"]);return ie(u,H(u.queryId,t,o,r,l,u.queries))},exports.ResultTableView=e=>ie(e,z(e.queryId,e.queries)),exports.RowView=Re,exports.SliceView=ve,exports.SortedTableView=e=>{var s=e,{cellId:t,descending:o,offset:r,limit:l}=s,u=ue(s,["cellId","descending","offset","limit"]);return ae(u,O(u.tableId,t,o,r,l,u.store))},exports.TableView=Ce,exports.TablesView=({store:e,tableComponent:s=Ce,getTableComponentProps:t,separator:r,debugIds:l})=>we(o(P(e),(o=>de(s,le(re({},xe(t,o)),{key:o,tableId:o,store:e,debugIds:l})))),r),exports.ValueView=ke,exports.ValuesView=({store:e,valueComponent:s=ke,getValueComponentProps:t,separator:r,debugIds:l})=>we(o(D(e),(o=>de(s,le(re({},xe(t,o)),{key:o,valueId:o,store:e,debugIds:l})))),r),exports.tableView=ae,exports.useAddRowCallback=(e,s,t=[],o,r=d,u=[])=>{const n=I(o);return k((t=>l(n,(o=>l(s(t,o),(s=>r(o.addRow(e,s),o,s)))))),[n,e,...t,...u])},exports.useCell=M,exports.useCellIds=B,exports.useCellIdsListener=(e,s,t,o,r,l)=>L("CellIds",I(l),t,o,[e,s],r),exports.useCellListener=(e,s,t,o,r,l,u)=>L("Cell",I(u),o,r,[e,s,t],l),exports.useCheckpoint=W,exports.useCheckpointIds=N,exports.useCheckpointIdsListener=(e,s,t)=>L("CheckpointIds",C(t),e,s),exports.useCheckpointListener=(e,s,t,o)=>L("Checkpoint",C(o),s,t,[e]),exports.useCheckpoints=e=>p(e,10),exports.useCreateCheckpoints=(e,s,t)=>h(e,s,t),exports.useCreateIndexes=(e,s,t)=>h(e,s,t),exports.useCreateMetrics=(e,s,t)=>h(e,s,t),exports.useCreatePersister=(e,s,t=[],o,r=[])=>{const[,l]=V(),u=g((()=>s(e)),[e,...t]);return v((()=>{var e;return e=function*(){yield null==o?void 0:o(u),l(1)},new Promise(((s,t)=>{var o=s=>{try{l(e.next(s))}catch(e){t(e)}},r=s=>{try{l(e.throw(s))}catch(e){t(e)}},l=e=>e.done?s(e.value):Promise.resolve(e.value).then(o,r);l((e=e.apply(void 0,null)).next())})),()=>{u.destroy()}}),[u,...r]),u},exports.useCreateQueries=(e,s,t)=>h(e,s,t),exports.useCreateRelationships=(e,s,t)=>h(e,s,t),exports.useCreateStore=(e,s=[])=>g(e,s),exports.useDelCellCallback=(e,s,t,o,r,l,u)=>T(r,"Cell",l,u,e,s,t,o),exports.useDelRowCallback=(e,s,t,o,r)=>T(t,"Row",o,r,e,s),exports.useDelTableCallback=(e,s,t,o)=>T(s,"Table",t,o,e),exports.useDelTablesCallback=(e,s,t)=>T(e,"Tables",s,t),exports.useDelValueCallback=(e,s,t,o)=>T(s,"Value",t,o,e),exports.useDelValuesCallback=(e,s,t)=>T(e,"Values",s,t),exports.useGoBackwardCallback=X,exports.useGoForwardCallback=Y,exports.useGoToCallback=(e,s=[],t,o=d,r=[])=>{const u=C(t);return k((s=>l(u,(t=>l(e(s),(e=>o(t.goTo(e),e)))))),[u,...s,...r])},exports.useIndexes=e=>p(e,4),exports.useLinkedRowIds=U,exports.useLinkedRowIdsListener=(e,s,t,o,r)=>L("LinkedRowIds",b(r),t,o,[e,s]),exports.useLocalRowIds=Q,exports.useLocalRowIdsListener=(e,s,t,o,r)=>L("LocalRowIds",b(r),t,o,[e,s]),exports.useMetric=A,exports.useMetricListener=(e,s,t,o)=>L("Metric",x(o),s,t,[e]),exports.useMetrics=e=>p(e,2),exports.useQueries=e=>p(e,8),exports.useRedoInformation=e=>{var s;const t=C(e),[,,[o]]=N(t);return[!r(o),Y(t),o,null!=(s=l(o,(e=>null==t?void 0:t.getCheckpoint(e))))?s:""]},exports.useRelationships=e=>p(e,6),exports.useRemoteRowId=G,exports.useRemoteRowIdListener=(e,s,t,o,r)=>L("RemoteRowId",b(r),t,o,[e,s]),exports.useResultCell=K,exports.useResultCellIds=J,exports.useResultCellIdsListener=(e,s,t,o,r)=>L("ResultCellIds",R(r),t,o,[e,s]),exports.useResultCellListener=(e,s,t,o,r,l)=>L("ResultCell",R(l),o,r,[e,s,t]),exports.useResultRow=(e,s,t)=>y("ResultRow",R(t),{},[e,s]),exports.useResultRowIds=z,exports.useResultRowIdsListener=(e,s,t,o)=>L("ResultRowIds",R(o),s,t,[e]),exports.useResultRowListener=(e,s,t,o,r)=>L("ResultRow",R(r),t,o,[e,s]),exports.useResultSortedRowIds=H,exports.useResultSortedRowIdsListener=(e,s,t,o,r,l,u,d)=>L("ResultSortedRowIds",R(d),l,u,[e,s,t,o,r]),exports.useResultTable=(e,s)=>y("ResultTable",R(s),{},[e]),exports.useResultTableListener=(e,s,t,o)=>L("ResultTable",R(o),s,t,[e]),exports.useRow=(e,s,t)=>y("Row",I(t),{},[e,s]),exports.useRowIds=q,exports.useRowIdsListener=(e,s,t,o,r)=>L("RowIds",I(r),s,t,[e],o),exports.useRowListener=(e,s,t,o,r,l)=>L("Row",I(l),t,o,[e,s],r),exports.useSetCellCallback=(e,s,t,o,r,l,u,d)=>S(l,"Cell",o,r,u,d,e,s,t),exports.useSetCheckpointCallback=(e=d,s=[],t,o=d,r=[])=>{const u=C(t);return k((s=>l(u,(t=>{const r=e(s);o(t.addCheckpoint(r),t,r)}))),[u,...s,...r])},exports.useSetPartialRowCallback=(e,s,t,o,r,l,u)=>S(r,"PartialRow",t,o,l,u,e,s),exports.useSetPartialValuesCallback=(e,s,t,o,r)=>S(t,"PartialValues",e,s,o,r),exports.useSetRowCallback=(e,s,t,o,r,l,u)=>S(r,"Row",t,o,l,u,e,s),exports.useSetTableCallback=(e,s,t,o,r,l)=>S(o,"Table",s,t,r,l,e),exports.useSetTablesCallback=(e,s,t,o,r)=>S(t,"Tables",e,s,o,r),exports.useSetValueCallback=(e,s,t,o,r,l)=>S(o,"Value",s,t,r,l,e),exports.useSetValuesCallback=(e,s,t,o,r)=>S(t,"Values",e,s,o,r),exports.useSliceIds=E,exports.useSliceIdsListener=(e,s,t,o)=>L("SliceIds",w(o),s,t,[e]),exports.useSliceRowIds=F,exports.useSliceRowIdsListener=(e,s,t,o,r)=>L("SliceRowIds",w(r),t,o,[e,s]),exports.useSortedRowIds=O,exports.useSortedRowIdsListener=(e,s,t,o,r,l,u,d,n)=>L("SortedRowIds",I(n),l,u,[e,s,t,o,r],d),exports.useStore=e=>p(e,0),exports.useTable=(e,s)=>y("Table",I(s),{},[e]),exports.useTableIds=P,exports.useTableIdsListener=(e,s,t,o)=>L("TableIds",I(o),e,s,[],t),exports.useTableListener=(e,s,t,o,r)=>L("Table",I(r),s,t,[e],o),exports.useTables=e=>y("Tables",I(e),{}),exports.useTablesListener=(e,s,t,o)=>L("Tables",I(o),e,s,[],t),exports.useUndoInformation=e=>{var s;const t=C(e),[o,r]=N(t);return[(u=o,!(0==(e=>e.length)(u))),X(t),r,null!=(s=l(r,(e=>null==t?void 0:t.getCheckpoint(e))))?s:""];var u},exports.useValue=j,exports.useValueIds=D,exports.useValueIdsListener=(e,s,t,o)=>L("ValueIds",I(o),e,s,[],t),exports.useValueListener=(e,s,t,o,r)=>L("Value",I(r),s,t,[e],o),exports.useValues=e=>y("Values",I(e),{}),exports.useValuesListener=(e,s,t,o)=>L("Values",I(o),e,s,[],t);
